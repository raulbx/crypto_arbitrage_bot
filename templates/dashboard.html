<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="">
		<meta name="description" content="Crypto Arbitrage Opportunity Finder">
		<title>Crypto Arb Dashboard</title>
		<link rel="icon" href="https://milligram.io/images/icon.png">
		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
		<link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
		<link rel="stylesheet" href="//cdn.rawgit.com/milligram/milligram/master/dist/milligram.min.css">
		<link rel="stylesheet" href="https://milligram.io/styles/main.css">
	</head>
	<body>
		<main class="wrapper">
			<nav class="navigation">
				<section class="container">
					<a class="navigation-title" href=".">
						<svg class="img" version="1.1" viewBox="0 0 463 669">
							<g transform="translate(0.000000,669.000000) scale(0.100000,-0.100000)">
								<path d="M2303 6677c-11-13-58-89-393-627-128-206-247-397-265-425-18-27-85-135-150-240-65-104-281-451-480-770-358-575-604-970-641-1032-10-18-45-74-76-126-47-78-106-194-107-212-1-3-11-26-24-53-60-118-132-406-157-623-19-158-8-491 20-649 82-462 291-872 619-1213 192-199 387-340 646-467 335-165 638-235 1020-235 382 0 685 70 1020 235 259 127 454 268 646 467 328 341 537 751 619 1213 28 158 39 491 20 649-25 217-97 505-157 623-13 27-23 50-23 53 0 16-57 127-107 210-32 52-67 110-77 128-37 62-283 457-641 1032-199 319-415 666-480 770-65 105-132 213-150 240-18 28-137 219-265 425-354 570-393 630-400 635-4 3-12-1-17-8zm138-904c118-191 654-1050 1214-1948 148-236 271-440 273-452 2-13 8-23 11-23 14 0 72-99 125-212 92-195 146-384 171-598 116-974-526-1884-1488-2110-868-205-1779 234-2173 1046-253 522-257 1124-10 1659 45 97 108 210 126 225 4 3 9 13 13 22 3 9 126 209 273 445 734 1176 1102 1766 1213 1946 67 108 124 197 126 197 2 0 59-89 126-197zM1080 3228c-75-17-114-67-190-243-91-212-128-368-137-580-34-772 497-1451 1254-1605 77-15 112-18 143-11 155 35 212 213 106 329-32 36-62 48-181 75-223 50-392 140-552 291-115 109-178 192-242 316-101 197-136 355-128 580 3 111 10 167 30 241 30 113 80 237 107 267 11 12 20 26 20 32 0 6 8 22 17 36 26 41 27 99 3 147-54 105-142 149-250 125z"></path>
							</g>
						</svg>
						&nbsp;
						<h1 class="title">Crypto Arb Finder</h1>
					</a>
					<!--
					<ul class="navigation-list float-right">
						<li class="navigation-item">
							<a class="navigation-link" href="#popover-support" data-popover>Trading</a>
							<div class="popover" id="popover-support">
								<ul class="popover-list">
									<li class="popover-item"><a class="popover-link" target="blank" href="" title="Portfolio">Portfolio</a></li>
								</ul>
							</div>
						</li>
					</ul>-->
				</section>
			</nav>
			<section class="container" id="examples">
				<div class="row">
					<div class="column column-80">
						<h5 class="title">Current Arbitrage Opportunities</h5>
						
					</div>
					<div class="column column-20">
						<label for="capitalAllocated">Capital Allocated</label>
						<input type=text id="capitalAllocated" value="10">
					</div>
				</div>
				<div class="row">
					<div class="column column-50">
						<a class="button" href="#">BTC</a>
						<a class="button" href="#">XRP</a>
						<a class="button" href="#">ETH</a>
						<a class="button" href="#">XLM</a>
						<a class="button" href="#">LTC</a>
						<a class="button" href="#">ZEC</a>
						<a class="button" href="#">DASH</a>
						<a class="button" href="#">ENJ</a>
					</div>
					<div class="column column-50">
						<a class="button" href="#">Bitfinex</a>
						<a class="button" href="#">CEX.IO</a>
						<a class="button" href="#">Cryptopia</a>
						<a class="button" href="#">EXMO</a>
						<a class="button" href="#">HitBTC</a>
						<a class="button" href="#">Kraken</a>
					</div>
				</div>
				<div class="row">
					<div class="column column-100">
				<table id="myTable">
					<thead>
						<tr>
							<th>Coin</th>
							<th>Exchange 1</th>
							<th>Exchange 2</th>
							<th>Profit</th>
							<th>Adj.Profit</th>
							<th>Investment</th>
							<th>Return</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td colspan="7">Fetching prices and analyzing opportunities. Data will load in few minutes</td>
							<!--
							<td ><span id='base_coin'>{{ base_coin }}</span></td>
							<td ><span id='exchange_1'>{{ exchange_1 }}({{ex1_coin_pair}}) {{exchange1_price}}</span></td>
							<td ><span id='exchange_2'>{{ exchange_2 }}({{ex2_coin_pair}}) {{exchange2_price}}</span></td>
							<td ><span id='capital_invested'{{ capital_invested }}></span></td>
							<td ><span id='capital_recieved'>{{ capital_recieved }}</span></td>
							<td ><span id='raw_roi'></span>{{ raw_roi }}</td>
							<td ><span id='spread'>{{ spread }} ({{arb_return}}%)</span></td>-->
						</tr>
					</tbody>
				</table>
			</div>
		</div>
			</section>
			<section class="container">
				<div class="row">
					<div class="column column-100"><font color="red">
					Adjusted profit is the final profit after rebalancing the portfolio to a low risk state. This includes all the transfer fee and trading fee.</font>
				</div>
			</div>
			</section>
			<footer class="footer">
				<section class="container">
					<p>Crypto Trading Bot (Ver 0.2)</p>
				</section>
			</footer>

		</main>
		<!--<script src="https://milligram.io/scripts/main.js"></script>-->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script>
			window.jQuery || document.write('<script src="{{
			url_for('static', filename='jquery.js') }}">\x3C/script>')
		</script>
		<script type=text/javascript>
			$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
			function fetchdata(){
				var capitalAllocated = $("#capitalAllocated").val();
				if (capitalAllocated== null){
					capitalAllocated = 10
				}
				$.ajax({
					url: $SCRIPT_ROOT + '/_add_numbers',
					type: 'get',
					data:{capitalAllocated:capitalAllocated},
					success: function(data){
						$('#myTableRow').remove();
						$('#myTable tbody').replaceWith('<tbody><tr><td colspan="7"><span id="last_update"style="font-style:italic;color:red; font-size:small;"></span></td></tr></tbody>');
						json_data = $.parseJSON(data);
						$.each(json_data, function(i, item) {
							// Perform operation on return value
							$('#myTable tr:last').after('<tr id="myTableRow"><td>'+item.base_coin+'</td><td>'+item.exchange_1 +' ('+ item.ex1_coin_pair+') '+ item.exchange1_price+'</td><td>'+item.exchange_2 +' ('+ item.ex2_coin_pair+') '+ item.exchange2_price+'</td><td>'+item.raw_roi+'%</td><td>'+item.arb_return +'%('+item.spread+')'+'</td><td>'+item.capital_invested+'</span></td><td>'+item.capital_recieved+'</td></tr>');
							$("#last_update").text('Updated at: '+item.update_ts)
						});
				},
				complete:function(data){
					setTimeout(fetchdata,30000);
				}
			});
			}
			$(document).ready(function(){
				fetchdata();
				setTimeout(fetchdata,30000);
			});
		</script>
	</body>
</html>